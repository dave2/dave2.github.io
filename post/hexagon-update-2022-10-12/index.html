<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hexagon Game: Update for 12 October 2022 | Loosely Coherent Ramblings</title><meta name=keywords content><meta name=description content="Well there&rsquo;s been a little bit more progress on world generation. I&rsquo;ve been avoiding working on roads (I have a theory) and rivers (lol no ideas), and doing &ldquo;city&rdquo; generation.
Placing the cities is easy enough. The world is divided into biomes, and we assign one city to each biome, checking to make sure when we place it there are no other cities too close. We also check against a reserved starting area."><meta name=author content><link rel=canonical href=https://dave2.github.io/post/hexagon-update-2022-10-12/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://dave2.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dave2.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dave2.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://dave2.github.io/apple-touch-icon.png><link rel=mask-icon href=https://dave2.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hexagon Game: Update for 12 October 2022"><meta property="og:description" content="Well there&rsquo;s been a little bit more progress on world generation. I&rsquo;ve been avoiding working on roads (I have a theory) and rivers (lol no ideas), and doing &ldquo;city&rdquo; generation.
Placing the cities is easy enough. The world is divided into biomes, and we assign one city to each biome, checking to make sure when we place it there are no other cities too close. We also check against a reserved starting area."><meta property="og:type" content="article"><meta property="og:url" content="https://dave2.github.io/post/hexagon-update-2022-10-12/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-12T11:47:55+13:00"><meta property="article:modified_time" content="2022-10-12T11:47:55+13:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hexagon Game: Update for 12 October 2022"><meta name=twitter:description content="Well there&rsquo;s been a little bit more progress on world generation. I&rsquo;ve been avoiding working on roads (I have a theory) and rivers (lol no ideas), and doing &ldquo;city&rdquo; generation.
Placing the cities is easy enough. The world is divided into biomes, and we assign one city to each biome, checking to make sure when we place it there are no other cities too close. We also check against a reserved starting area."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dave2.github.io/post/"},{"@type":"ListItem","position":2,"name":"Hexagon Game: Update for 12 October 2022","item":"https://dave2.github.io/post/hexagon-update-2022-10-12/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hexagon Game: Update for 12 October 2022","name":"Hexagon Game: Update for 12 October 2022","description":"Well there\u0026rsquo;s been a little bit more progress on world generation. I\u0026rsquo;ve been avoiding working on roads (I have a theory) and rivers (lol no ideas), and doing \u0026ldquo;city\u0026rdquo; generation.\nPlacing the cities is easy enough. The world is divided into biomes, and we assign one city to each biome, checking to make sure when we place it there are no other cities too close. We also check against a reserved starting area.","keywords":[],"articleBody":"Well there’s been a little bit more progress on world generation. I’ve been avoiding working on roads (I have a theory) and rivers (lol no ideas), and doing “city” generation.\nPlacing the cities is easy enough. The world is divided into biomes, and we assign one city to each biome, checking to make sure when we place it there are no other cities too close. We also check against a reserved starting area.\nThe biggest problem is then names. These have to be sourced on demand from .. something. The best way would be names which were generated as needed, that were vaguely consistent with a language (ie, “hhhhhhhf” is not a great city name) and which didn’t just come from a fixed list (because I am not that creative).\nOne way would be to just use any one of a number of online generators to produce a “long enough” list for the game, and I did think about doing this. It wouldn’t be as elegant as actual name generation on the fly, but it’s simple to implement.\nAlthough “simple to implement” is often my approach1, there were some open source name generators based on a very classical approach called Markov Chains. These produce new “words” by statistical analysis of some input word lists and then making new combinations from the observed patterns in the lists plus some randomness.\nThere wasn’t any good examples I liked in GDscript, so porting one from another language was the next best thing. Despite how awful I am usually at writing code, I read it fairly well and have read enough in a variety of languages to be able to work out how to translate it to another language.\nOne of the biggest problems with doing that sort of porting is the actual algorithm can be opaque enough that the translation is merely shifting one language’s syntax to another syntax and a little bit of massaging how it uses types and built-in functions.\nUsually these things don’t come with a nice set of tests to show the outcome of any function works as expected. This means when it doesn’t work, if you don’t know the algorithm it an be pretty hard to see where it’s going wrong.\nAfter a few days of headscratching, I did finally find the cause of the code not producing any useful words: substrings. In the original langauge, there’s a function substring() which obviously would map to substr() in GDscript: give me some part of the string.\nBut it turned out these two functions had different meanings for their inputs: In GDscript it’s substr(start,len) while the original langauge I was porting from used substring(start,end). It had another function, substr() as well which implemented the same handling as GDscript’s substr(). But this wasn’t obvious when I did my awful lazy conversion pass over the code.\nNever mind, now it works. We have cities with generated names and a way to generate names for lots of other things.\nAt some point I’ll publish the GDscript code under the same license as the original if anyone wants it. I wouldn’t trust it though!\nSome readers will be aware that in the past my view of “simple” has included just ignoring huge sections of RFCs because they are not “really” needed. That’s how simple I sometimes reach. ↩︎\n","wordCount":"553","inLanguage":"en","datePublished":"2022-10-12T11:47:55+13:00","dateModified":"2022-10-12T11:47:55+13:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://dave2.github.io/post/hexagon-update-2022-10-12/"},"publisher":{"@type":"Organization","name":"Loosely Coherent Ramblings","logo":{"@type":"ImageObject","url":"https://dave2.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dave2.github.io/ accesskey=h title="Loosely Coherent Ramblings (Alt + H)">Loosely Coherent Ramblings</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Hexagon Game: Update for 12 October 2022</h1><div class=post-meta><span title='2022-10-12 11:47:55 +1300 +1300'>October 12, 2022</span></div></header><div class=post-content><p>Well there&rsquo;s been a little bit more progress on world generation. I&rsquo;ve
been avoiding working on roads (I have a theory) and rivers (lol no
ideas), and doing &ldquo;city&rdquo; generation.</p><p>Placing the cities is easy enough. The world is divided into biomes,
and we assign one city to each biome, checking to make sure when
we place it there are no other cities too close. We also check against
a reserved starting area.</p><p>The biggest problem is then names. These have to be sourced on demand
from .. something. The best way would be names which were generated
as needed, that were vaguely consistent with a language (ie, &ldquo;hhhhhhhf&rdquo;
is not a great city name) and which didn&rsquo;t just come from a fixed list
(because I am not that creative).</p><p>One way would be to just use any one of a number of online generators
to produce a &ldquo;long enough&rdquo; list for the game, and I did think about
doing this. It wouldn&rsquo;t be as elegant as actual name generation on
the fly, but it&rsquo;s simple to implement.</p><p>Although &ldquo;simple to implement&rdquo; is often my approach<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, there were
some open source name generators based on a very classical approach
called Markov Chains. These produce new &ldquo;words&rdquo; by statistical
analysis of some input word lists and then making new combinations
from the observed patterns in the lists plus some randomness.</p><p>There wasn&rsquo;t any good examples I liked in GDscript, so porting one
from another language was the next best thing. Despite how awful
I am usually at writing code, I read it fairly well and have read
enough in a variety of languages to be able to work out how to
translate it to another language.</p><p>One of the biggest problems with doing that sort of porting is the
actual algorithm can be opaque enough that the translation is merely
shifting one language&rsquo;s syntax to another syntax and a little bit of
massaging how it uses types and built-in functions.</p><p>Usually these things don&rsquo;t come with a nice set of tests to show
the outcome of any function works as expected. This means when it
doesn&rsquo;t work, if you don&rsquo;t know the algorithm it an be pretty hard
to see where it&rsquo;s going wrong.</p><p>After a few days of headscratching, I did finally find the cause of
the code not producing any useful words: substrings. In the original
langauge, there&rsquo;s a function <code>substring()</code> which obviously would
map to <code>substr()</code> in GDscript: give me some part of the string.</p><p>But it turned out these two functions had different meanings for
their inputs: In GDscript it&rsquo;s <code>substr(start,len)</code> while the original
langauge I was porting from used <code>substring(start,end)</code>. It had
<em>another</em> function, <code>substr()</code> as well which implemented the same
handling as GDscript&rsquo;s <code>substr()</code>. But this wasn&rsquo;t obvious when
I did my awful lazy conversion pass over the code.</p><p>Never mind, now it works. We have cities with generated names and
a way to generate names for lots of other things.</p><p>At some point I&rsquo;ll publish the GDscript code under the same license
as the original if anyone wants it. I wouldn&rsquo;t trust it though!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Some readers will be aware that in the past my view of &ldquo;simple&rdquo;
has included just ignoring huge sections of RFCs because they are
not &ldquo;really&rdquo; needed. That&rsquo;s how simple I sometimes reach.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://dave2.github.io/>Loosely Coherent Ramblings</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>